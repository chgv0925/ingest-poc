!function(t,e){if("function"==typeof define&&define.amd)define(["exports"],e);else if("undefined"!=typeof exports)e(exports);else{var n={exports:{}};e(n.exports),t.jstoxml=n.exports}}(this,function(t){"use strict";function e(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function n(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){r(t,e,n[e])})}return t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.toXML=void 0;var c=["_selfCloseTag","_attrs"],a=new RegExp(c.join("|"),"g"),i=function(t){return(Array.isArray(t)?"array":"object"===o(t)&&null!==t&&t._name&&"special-object")||t instanceof Date&&"date"||null===t&&"null"||o(t)},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new RegExp("(".concat(Object.keys(e).join("|"),")"),"g");return String(t).replace(n,function(t,n){return e[n]||""})},l=function(){var t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=[];n=Array.isArray(t)?t.map(function(t){var n=Object.keys(t)[0],r=t[n],o=e?u(r,e):r,c=!0===o?"":'="'.concat(o,'"');return"".concat(n).concat(c)}):Object.keys(t).map(function(n){var r=e?u(t[n],e):t[n],o=!0===t[n]?"":'="'.concat(r,'"');return"".concat(n).concat(o)});return n}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0);if(0===t.length)return"";var e=t.join(" ");return" ".concat(e)},f=["string","number","boolean"],s=function(t){return f.includes(i(t))},d=[].concat(f,["date","special-object"]),b=function t(){var r,f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},p=b.depth,v=void 0===p?0:p,y=b.indent,m=b._isFirstItem,g=(b._isLastItem,b.attributesFilter),h=b.header,j=b.filter,_=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.repeat(e)}(y,v),O=i(f),k=(r=f,d.includes(i(r))),S=0===v&&(k||!k&&m),A="";switch(O){case"special-object":var w=f._name,x=f._content;if(null===x){A=w;break}if(Array.isArray(x)&&x.every(s))return x.map(function(e){return t({_name:w,_content:e},n({},b,{depth:v}))}).join("");if(w.match(a))break;var I=t(x,n({},b,{depth:v+1})),L=i(I),E=!I.match("<"),F="".concat(y&&!S?"\n":"").concat(_),P="undefined"===L||""===I,T="boolean"===o(f._selfCloseTag)?P&&f._selfCloseTag:P,M=T?"/":"",C=l(f._attrs,g),X="<".concat(w).concat(C).concat(M,">"),D=y&&!E?"\n".concat(_):"",R=T?"":"".concat(I).concat(D,"</").concat(w,">");A="".concat(F).concat(X).concat(R);break;case"object":var U=Object.keys(f);A=U.map(function(r,o){var a=n({},b,{_isFirstItem:0===o,_isLastItem:o+1===U.length}),u={_name:r};if("object"===i(f[r])&&(c.forEach(function(t){var e=f[r][t];void 0!==e&&(u[t]=e,delete f[r][t])}),void 0!==f[r]._content&&Object.keys(f[r]).length>1)){var l=Object.assign({},f[r]);delete l._content,u._content=[].concat(e(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(t).map(function(e){return{_name:e,_content:t[e]}})}(l)),[f[r]._content])}return void 0===u._content&&(u._content=f[r]),t(u,a,r)},b).join("");break;case"function":var q=f(b);A=t(q,b);break;case"array":A=f.map(function(e,r){var o=n({},b,{_isFirstItem:0===r,_isLastItem:r+1===f.length});return t(e,o)}).join("");break;default:A=u(f,j)}var z=function(t){var e=t.header,n=t.indent,r=(t.depth,t.isOutputStart);if(!e||!r)return"";var c="boolean"===o(e);return"".concat(c?'<?xml version="1.0" encoding="UTF-8"?>':e).concat(n?"\n":"")}({header:h,indent:y,depth:v,isOutputStart:S});return"".concat(z).concat(A)};t.toXML=b;var p={toXML:b};t.default=p});